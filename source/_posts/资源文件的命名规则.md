---
title: 资源文件的命名规则
tags:
- 缓存
- 浏览器
---

> 以下内容是在了解`浏览器缓存机制`的前提下展开说明

`资源文件名命名规则`**必须**包含一串hash(无论是与内容无关的hash，还是根据内容生成的hash)。

**这样做的目的是**: 避免资源文件更新后，由于`disk cache`或者`memory cache`存在，导致加载资源还是旧的资源。

> `memory cache`可以通过关闭浏览器，重新打开可以解决。 `disk cache`则需要强制清除缓存才能处理。这些操作不可能由用户来处理，体验会非常差，所以要避免这种情况发生。

|   文件内容变化的频率   |   文件名称采用的策略   |   文件类型   |
| ---- | ---- | ---- |
|   经常   |   hash   |   包含业务代码、图片等资源的文件   |
|   不经常   |   hash/版本号   |   第三方依赖、全局模块   |
|   不会发生变化   |   -   |   第三方依赖（很少）   |

当然这个对于经常内容发送改变的文件采用这样的文件名加`hash`，只有不变动的文件才不加`hash`。如果使用vue、react这些不经常变动的第三方框架，文件名至少也要加个版本号之类的字符。如果什么都不加的话，如果项目使用了第三方框架的新的功能，升级了第三方框架的版本。而且文件名只是框架名称，在浏览器存在`memory cache`或者`disk cache`的情况下，由于加载的是旧版本的内容，没有包含框架新的功能，如果使用了框架的新功能，则页面会发生报错。

